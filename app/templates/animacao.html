{% extends "base.html" %} {% block title %}Busca{% endblock %} {% block content
%}
<div id="resultado">
  {% if resultado_completo %}
  <p>Algoritmo utilizado: {{ resultado_completo['algoritmo'] }}</p>
  <p>Nó inicial: {{ resultado_completo['id_no'] }}</p>
  {% if resultado_completo['resultado_busca'] %}
  <h3>Resultados da Busca</h3>
  <p>
    <strong>Quantidade de Mensagens:</strong>
    {{msg_sum}}
  </p>
  {% else %}
  <p>Nenhum resultado encontrado.</p>
  {% endif %} {% endif %}
</div>
<h1>Animação</h1>
<div id="animation-container">
  <img
    src="data:image/png;base64,{{ img_data }}"
    alt="Random Walk Graph"
    id="animation-img"
  />
</div>

<form id="frame-form">
  <button
    id="anterior-btn"
    type="button"
    {% if frame_atual == 0 %}disabled{% endif %}
    onclick="mudarFrame('anterior')"
  >
    Anterior
  </button>
  {% set decoded_data = resultado_completo.resultado_busca | json_decode %}
  {% set path_length = decoded_data._path | length %}
  
  <button id="proximo-btn" type="button" {% if frame_atual == path_length - 1 %}disabled{% endif %} onclick="mudarFrame('proximo')">
      Próximo
  </button>
  
</form>
<script>
  function mudarFrame(acao) {
    fetch("/mudar_frame", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({ acao: acao }),
    })
      .then((response) => response.text())
      .then((data) => {

        document.body.innerHTML = data;
      })
      .catch((error) => console.error("Error:", error));
  }
</script>

{% endblock %}
